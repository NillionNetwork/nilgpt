pre-commit:
  jobs:
    - name: biome-format
      run: |
        # Filter staged files to only include files that Biome can process
        biome_files=$(echo "{staged_files}" | tr ' ' '\n' | grep -E '\.(ts|js|tsx|mjs|json)$' | tr '\n' ' ')
        if [ -n "$biome_files" ]; then
          pnpm format $biome_files
        fi
      stage_fixed: true

pre-push:
  jobs:
    - name: biome-check
      run: |
        # Filter push files to only include files that Biome can process
        biome_files=$(echo "{push_files}" | tr ' ' '\n' | grep -E '\.(ts|js|tsx|mjs|json)$' | tr '\n' ' ')
        if [ -n "$biome_files" ]; then
          pnpm lint $biome_files
        fi
    - name: tsc-check
      run: pnpm exec tsc
